{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "SSISConnection",
  "description": "SSIS Metadata Database Connection Config",
  "type": "object",
  "javaType": "org.openmetadata.schema.services.connections.pipeline.SSISConnection",
  "definitions": {
    "SSISType": {
      "description": "Service type.",
      "type": "string",
      "enum": [
        "SSIS"
      ],
      "default": "SSIS"
    },
    "localProjectsPath": {
      "title": "Local Projects Path",
      "description": "Path leading to your projects",
      "type": "string"
    }
  },
  "properties": {
    "type": {
      "title": "Service Type",
      "description": "Service Type",
      "default": "SSIS",
      "type": "string",
      "enum": [
        "SSIS"
      ]
    },
    "databaseConnection": {
      "title": "Metadata Database Connection",
      "description": "Underlying database connection",
      "$schema": "http://json-schema.org/draft-07/schema#",
      "type": "object",
      "javaType": "org.openmetadata.schema.services.connections.database.MssqlConnection",
      "definitions": {
        "mssqlType": {
          "description": "Service type.",
          "type": "string",
          "enum": [
            "Mssql"
          ],
          "default": "Mssql"
        },
        "mssqlScheme": {
          "description": "SQLAlchemy driver scheme options.",
          "type": "string",
          "enum": [
            "mssql+pyodbc",
            "mssql+pytds",
            "mssql+pymssql"
          ],
          "default": "mssql+pytds"
        }
      },
      "properties": {
        "type": {
          "title": "Service Type",
          "description": "Service Type",
          "default": "Mssql",
          "type": "string",
          "enum": [
            "Mssql"
          ]
        },
        "scheme": {
          "title": "Connection Scheme",
          "description": "SQLAlchemy driver scheme options.",
          "default": "mssql+pytds",
          "type": "string",
          "enum": [
            "mssql+pyodbc",
            "mssql+pytds",
            "mssql+pymssql"
          ]
        },
        "username": {
          "title": "Username",
          "description": "Username to connect to MSSQL. This user should have privileges to read all the metadata in MsSQL.",
          "type": "string"
        },
        "password": {
          "title": "Password",
          "description": "Password to connect to MSSQL.",
          "type": "string",
          "format": "password"
        },
        "hostPort": {
          "title": "Host and Port",
          "description": "Host and port of the MSSQL service.",
          "type": "string"
        },
        "database": {
          "title": "Database",
          "description": "Database of the data source. This is optional parameter, if you would like to restrict the metadata reading to a single database. When left blank, OpenMetadata Ingestion attempts to scan all the databases.",
          "type": "string"
        },
        "driver": {
          "title": "Driver",
          "description": "ODBC driver version in case of pyodbc connection.",
          "type": "string",
          "default": "ODBC Driver 18 for SQL Server"
        },
        "encrypt": {
          "title": "Encrypt Connection",
          "description": "Enable SSL/TLS encryption for the MSSQL connection. When enabled, all data transmitted between the client and server will be encrypted.",
          "type": "boolean",
          "default": false
        },
        "trustServerCertificate": {
          "title": "Trust Server Certificate",
          "description": "Trust the server certificate without validation. Set to false in production to validate server certificates against the certificate authority.",
          "type": "boolean",
          "default": false
        },
        "sslConfig": {
          "title": "SSL Configuration",
          "description": "SSL/TLS certificate configuration for client authentication. Provide CA certificate, client certificate, and private key for mutual TLS authentication.",
          "javaType": "org.openmetadata.schema.security.ssl.SSLConfig",
          "mask": true,
          "oneOf": [
            {
              "$schema": "http://json-schema.org/draft-07/schema#",
              "title": "Validate SSL Client Config",
              "description": "OpenMetadata Client configured to validate SSL certificates.",
              "type": "object",
              "javaType": "org.openmetadata.schema.security.ssl.ValidateSSLClientConfig",
              "additionalProperties": false,
              "properties": {
                "caCertificate": {
                  "title": "CA Certificate",
                  "description": "The CA certificate used for SSL validation.",
                  "type": "string",
                  "format": "password",
                  "accept": [
                    ".pem",
                    ".crt",
                    ".cer",
                    ".der",
                    ".p12"
                  ],
                  "uiFieldType": "fileOrInput"
                },
                "sslCertificate": {
                  "title": "SSL Certificate",
                  "description": "The SSL certificate used for client authentication.",
                  "type": "string",
                  "format": "password",
                  "accept": [
                    ".pem",
                    ".crt",
                    ".cer",
                    ".der",
                    ".p12"
                  ],
                  "uiFieldType": "fileOrInput"
                },
                "sslKey": {
                  "title": "SSL Key",
                  "description": "The private key associated with the SSL certificate.",
                  "type": "string",
                  "format": "password",
                  "accept": [
                    ".pem",
                    ".crt",
                    ".cer",
                    ".der",
                    ".p12"
                  ],
                  "uiFieldType": "fileOrInput"
                }
              }
            }
          ]
        },
        "ingestAllDatabases": {
          "title": "Ingest All Databases",
          "description": "Ingest data from all databases in Mssql. You can use databaseFilterPattern on top of this.",
          "type": "boolean",
          "default": false
        },
        "schemaFilterPattern": {
          "title": "Default Schema Filter Pattern",
          "description": "Regex to only include/exclude schemas that matches the pattern.",
          "default": {
            "includes": [],
            "excludes": [
              "^db_.*",
              "^guest$",
              "^information_schema$",
              "^sys$"
            ]
          },
          "type": "object",
          "javaType": "org.openmetadata.schema.metadataIngestion.FilterPattern",
          "properties": {
            "includes": {
              "description": "List of strings/regex patterns to match and include only database entities that match.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "excludes": {
              "description": "List of strings/regex patterns to match and exclude only database entities that match.",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "tableFilterPattern": {
          "title": "Default Table Filter Pattern",
          "description": "Regex to only include/exclude tables that matches the pattern.",
          "type": "object",
          "javaType": "org.openmetadata.schema.metadataIngestion.FilterPattern",
          "properties": {
            "includes": {
              "description": "List of strings/regex patterns to match and include only database entities that match.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "excludes": {
              "description": "List of strings/regex patterns to match and exclude only database entities that match.",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "databaseFilterPattern": {
          "title": "Default Database Filter Pattern",
          "description": "Regex to only include/exclude databases that matches the pattern.",
          "default": {
            "includes": [],
            "excludes": [
              "^msdb$",
              "^model$",
              "^tempdb$"
            ]
          },
          "type": "object",
          "javaType": "org.openmetadata.schema.metadataIngestion.FilterPattern",
          "properties": {
            "includes": {
              "description": "List of strings/regex patterns to match and include only database entities that match.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "excludes": {
              "description": "List of strings/regex patterns to match and exclude only database entities that match.",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "storedProcedureFilterPattern": {
          "title": "Default Stored Procedure Filter Pattern",
          "description": "Regex to only include/exclude stored procedures that matches the pattern.",
          "default": {
            "includes": [],
            "excludes": [
              "^sp_",
              "^xp_",
              "^ms_"
            ]
          },
          "type": "object",
          "javaType": "org.openmetadata.schema.metadataIngestion.FilterPattern",
          "properties": {
            "includes": {
              "description": "List of strings/regex patterns to match and include only database entities that match.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "excludes": {
              "description": "List of strings/regex patterns to match and exclude only database entities that match.",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "connectionOptions": {
          "title": "Connection Options",
          "javaType": "org.openmetadata.schema.services.connections.database.ConnectionOptions",
          "description": "Additional connection options to build the URL that can be sent to service during the connection.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "connectionArguments": {
          "title": "Connection Arguments",
          "javaType": "org.openmetadata.schema.services.connections.database.ConnectionArguments",
          "description": "Additional connection arguments such as security or protocol configs that can be sent to service during connection.",
          "type": "object",
          "additionalProperties": {
            ".{1,}": {
              "type": "string"
            }
          }
        },
        "supportsMetadataExtraction": {
          "title": "Supports Metadata Extraction",
          "description": "Supports Metadata Extraction.",
          "type": "boolean",
          "default": true
        },
        "supportsDBTExtraction": {
          "description": "Supports DBT Extraction.",
          "type": "boolean",
          "default": true
        },
        "supportsProfiler": {
          "title": "Supports Profiler",
          "description": "Supports Profiler",
          "type": "boolean",
          "default": true
        },
        "supportsDatabase": {
          "title": "Supports Database",
          "description": "The source service supports the database concept in its hierarchy",
          "type": "boolean",
          "default": true
        },
        "supportsUsageExtraction": {
          "description": "Supports Usage Extraction.",
          "type": "boolean",
          "default": true
        },
        "supportsLineageExtraction": {
          "description": "Supports Lineage Extraction.",
          "type": "boolean",
          "default": true
        },
        "sampleDataStorageConfig": {
          "title": "Storage Config for Sample Data",
          "description": "Storage config to store sample data",
          "type": "object",
          "javaType": "org.openmetadata.schema.services.connections.database.SampleDataStorageConfig",
          "properties": {
            "config": {
              "oneOf": [
                {
                  "title": "No Sample Data Storage Config",
                  "type": "object",
                  "additionalProperties": false
                },
                {
                  "title": "Sample Data Storage Config",
                  "description": "Storage config to store sample data",
                  "type": "object",
                  "properties": {
                    "bucketName": {
                      "title": "Bucket Name",
                      "description": "Bucket Name",
                      "type": "string",
                      "default": ""
                    },
                    "prefix": {
                      "title": "Prefix",
                      "description": "Prefix of the data source.",
                      "type": "string",
                      "default": ""
                    },
                    "filePathPattern": {
                      "title": "File Path Pattern",
                      "description": "Provide the pattern of the path where the generated sample data file needs to be stored.",
                      "type": "string",
                      "default": "{service_name}/{database_name}/{database_schema_name}/{table_name}/sample_data.parquet"
                    },
                    "overwriteData": {
                      "title": "Overwrite Sample Data",
                      "description": "When this field enabled a single parquet file will be created to store sample data, otherwise we will create a new file per day",
                      "type": "boolean",
                      "default": true
                    },
                    "storageConfig": {
                      "oneOf": [
                        {
                          "title": "AWS S3 Storage Config",
                          "$schema": "http://json-schema.org/draft-07/schema#",
                          "description": "AWS credentials configs.",
                          "type": "object",
                          "javaType": "org.openmetadata.schema.security.credentials.AWSCredentials",
                          "properties": {
                            "awsAccessKeyId": {
                              "title": "AWS Access Key ID",
                              "description": "AWS Access key ID.",
                              "type": "string"
                            },
                            "awsSecretAccessKey": {
                              "title": "AWS Secret Access Key",
                              "description": "AWS Secret Access Key.",
                              "type": "string",
                              "format": "password"
                            },
                            "awsRegion": {
                              "title": "AWS Region",
                              "description": "AWS Region",
                              "type": "string"
                            },
                            "awsSessionToken": {
                              "title": "AWS Session Token",
                              "description": "AWS Session Token.",
                              "type": "string"
                            },
                            "endPointURL": {
                              "title": "Endpoint URL",
                              "description": "EndPoint URL for the AWS",
                              "type": "string",
                              "format": "uri"
                            },
                            "profileName": {
                              "title": "Profile Name",
                              "description": "The name of a profile to use with the boto session.",
                              "type": "string"
                            },
                            "assumeRoleArn": {
                              "title": "Role Arn for Assume Role",
                              "description": "The Amazon Resource Name (ARN) of the role to assume. Required Field in case of Assume Role",
                              "type": "string"
                            },
                            "assumeRoleSessionName": {
                              "title": "Role Session Name for Assume Role",
                              "description": "An identifier for the assumed role session. Use the role session name to uniquely identify a session when the same role is assumed by different principals or for different reasons. Required Field in case of Assume Role",
                              "type": "string",
                              "default": "OpenMetadataSession"
                            },
                            "assumeRoleSourceIdentity": {
                              "title": "Source Identity for Assume Role",
                              "description": "The Amazon Resource Name (ARN) of the role to assume. Optional Field in case of Assume Role",
                              "type": "string"
                            }
                          },
                          "additionalProperties": false,
                          "required": [
                            "awsRegion"
                          ]
                        },
                        {
                          "title": "OpenMetadata Storage",
                          "type": "object",
                          "additionalProperties": false
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "additionalProperties": false
        },
        "supportsQueryComment": {
          "title": "Supports Query Comment",
          "description": "For Database Services using SQLAlchemy, True to enable running a comment for all queries run from OpenMetadata.",
          "type": "boolean",
          "default": true
        },
        "supportsDataDiff": {
          "title": "Supports Data Diff Extraction.",
          "description": "Supports the data diff data qualty specification.",
          "type": "boolean",
          "default": true
        }
      },
      "additionalProperties": false,
      "required": [
        "database"
      ]
    },
    "packageConnection": {
      "title": "SSIS Projects Location (Local Path or S3 Bucket)",
      "description": "Underlying storage connection",
      "oneOf": [
        {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "title": "S3 Connection",
          "description": "S3 Connection.",
          "type": "object",
          "javaType": "org.openmetadata.schema.services.connections.storage.S3Connection",
          "definitions": {
            "s3Type": {
              "description": "S3 service type",
              "type": "string",
              "enum": [
                "S3"
              ],
              "default": "S3"
            }
          },
          "properties": {
            "type": {
              "title": "Service Type",
              "description": "Service Type",
              "default": "S3",
              "type": "string",
              "enum": [
                "S3"
              ]
            },
            "awsConfig": {
              "title": "AWS Credentials Configuration",
              "$schema": "http://json-schema.org/draft-07/schema#",
              "description": "AWS credentials configs.",
              "type": "object",
              "javaType": "org.openmetadata.schema.security.credentials.AWSCredentials",
              "properties": {
                "awsAccessKeyId": {
                  "title": "AWS Access Key ID",
                  "description": "AWS Access key ID.",
                  "type": "string"
                },
                "awsSecretAccessKey": {
                  "title": "AWS Secret Access Key",
                  "description": "AWS Secret Access Key.",
                  "type": "string",
                  "format": "password"
                },
                "awsRegion": {
                  "title": "AWS Region",
                  "description": "AWS Region",
                  "type": "string"
                },
                "awsSessionToken": {
                  "title": "AWS Session Token",
                  "description": "AWS Session Token.",
                  "type": "string"
                },
                "endPointURL": {
                  "title": "Endpoint URL",
                  "description": "EndPoint URL for the AWS",
                  "type": "string",
                  "format": "uri"
                },
                "profileName": {
                  "title": "Profile Name",
                  "description": "The name of a profile to use with the boto session.",
                  "type": "string"
                },
                "assumeRoleArn": {
                  "title": "Role Arn for Assume Role",
                  "description": "The Amazon Resource Name (ARN) of the role to assume. Required Field in case of Assume Role",
                  "type": "string"
                },
                "assumeRoleSessionName": {
                  "title": "Role Session Name for Assume Role",
                  "description": "An identifier for the assumed role session. Use the role session name to uniquely identify a session when the same role is assumed by different principals or for different reasons. Required Field in case of Assume Role",
                  "type": "string",
                  "default": "OpenMetadataSession"
                },
                "assumeRoleSourceIdentity": {
                  "title": "Source Identity for Assume Role",
                  "description": "The Amazon Resource Name (ARN) of the role to assume. Optional Field in case of Assume Role",
                  "type": "string"
                }
              },
              "additionalProperties": false,
              "required": [
                "awsRegion"
              ]
            },
            "bucketNames": {
              "title": "Bucket Names",
              "description": "Bucket Names of the data source.",
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": null
            },
            "connectionOptions": {
              "title": "Connection Options",
              "javaType": "org.openmetadata.schema.services.connections.database.ConnectionOptions",
              "description": "Additional connection options to build the URL that can be sent to service during the connection.",
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "connectionArguments": {
              "title": "Connection Arguments",
              "javaType": "org.openmetadata.schema.services.connections.database.ConnectionArguments",
              "description": "Additional connection arguments such as security or protocol configs that can be sent to service during connection.",
              "type": "object",
              "additionalProperties": {
                ".{1,}": {
                  "type": "string"
                }
              }
            },
            "containerFilterPattern": {
              "description": "Regex to only fetch containers that matches the pattern.",
              "title": "Default Storage container Filter Pattern",
              "default": {
                "includes": [],
                "excludes": [
                  "_SUCCESS"
                ]
              },
              "type": "object",
              "javaType": "org.openmetadata.schema.metadataIngestion.FilterPattern",
              "properties": {
                "includes": {
                  "description": "List of strings/regex patterns to match and include only database entities that match.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "excludes": {
                  "description": "List of strings/regex patterns to match and exclude only database entities that match.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "supportsMetadataExtraction": {
              "title": "Supports Metadata Extraction",
              "description": "Supports Metadata Extraction.",
              "type": "boolean",
              "default": true
            },
            "consoleEndpointURL": {
              "title": "Console Endpoint URL",
              "description": "Console EndPoint URL for S3-compatible services",
              "type": "string",
              "format": "uri"
            }
          },
          "additionalProperties": false,
          "required": [
            "awsConfig"
          ]
        },
        {
          "title": "Local Projects Path",
          "description": "Path leading to your projects",
          "type": "string"
        }
      ]
    },
    "supportsMetadataExtraction": {
      "title": "Supports Metadata Extraction",
      "description": "Supports Metadata Extraction.",
      "type": "boolean",
      "default": true
    }
  },
  "additionalProperties": false,
  "required": [
    "databaseConnection",
    "packageConnection"
  ]
}